<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SOC 2 Blog | Expert Guides & Industry Insights</title>
  <meta name="description" content="Expert-written guides on SOC 2 compliance, audit preparation, vendor selection, and industry best practices for startups and enterprises.">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    :root{--primary:#495AF5;--secondary:#7436FF}
    .gradient-bg{background:linear-gradient(135deg,var(--primary) 0%,var(--secondary) 100%);color:#fff}
    .vendor-table th{white-space:nowrap}
    .card-img-top{object-fit:cover;height:180px}
    .sticky-header th{position:sticky;top:0;background:#e6ecff;z-index:1}
    
    /* Blog-specific styles */
    .blog-card{transition:transform 0.2s ease,box-shadow 0.2s ease}
    .blog-card:hover{transform:translateY(-2px);box-shadow:0 8px 25px rgba(0,0,0,0.1)}
    .tag{background:#e6ecff;color:var(--primary);padding:0.25rem 0.75rem;border-radius:20px;font-size:0.8rem;text-decoration:none;margin-right:0.5rem;margin-bottom:0.5rem;display:inline-block}
    .tag:hover{background:var(--primary);color:white}
    .featured-badge{background:linear-gradient(45deg,#ff6b6b,#feca57);color:white;padding:0.5rem 1rem;border-radius:25px;font-size:0.8rem;font-weight:600;position:absolute;top:1rem;right:1rem;z-index:2}
    .author-info{display:flex;align-items:center;margin-top:1rem}
    .author-avatar{width:40px;height:40px;border-radius:50%;margin-right:0.75rem}
    .search-box{background:#f8f9ff;border:2px solid #e6ecff;border-radius:25px;padding:0.75rem 1.5rem;transition:all 0.3s ease}
    .search-box:focus{border-color:var(--primary);box-shadow:0 0 0 0.2rem rgba(73,90,245,0.25);background:white}
    .no-posts{text-align:center;padding:3rem;color:#6c757d}
  </style>
    <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-2JYY8MX561"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'G-2JYY8MX561');
  </script>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark gradient-bg shadow-sm fixed-top">
 <div class="container">
   <a class="navbar-brand fw-semibold" href="index.html">soc2certification.com</a>
   <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
     <span class="navbar-toggler-icon"></span>
   </button>
   <div class="collapse navbar-collapse" id="navbarNav">
     <ul class="navbar-nav ms-auto">
       <li class="nav-item"><a class="nav-link" href="index.html#vendors"><i class="bi bi-list-check"></i> Vendors</a></li>
       <li class="nav-item"><a class="nav-link active" href="blog.html"><i class="bi bi-journal-text"></i> Blog</a></li>
     </ul>
   </div>
 </div>
</nav>

<section class="gradient-bg py-5" style="margin-top:56px;">
  <div class="container text-center py-5">
    <h1 class="display-4 fw-bold">SOC 2 Knowledge Hub</h1>
    <p class="lead mb-4">Expert guides, real-world insights, and practical advice for your compliance journey</p>
    
    <!-- Search Box -->
    <div class="row justify-content-center">
      <div class="col-md-6">
        <div class="input-group">
          <input type="text" class="form-control search-box border-0" placeholder="Search articles..." id="searchInput">
          <button class="btn btn-light" type="button">
            <i class="bi bi-search"></i>
          </button>
        </div>
      </div>
    </div>
  </div>
</section>

<div class="container my-5">
  <div class="row">
    <div class="col-lg-9">
      
      <!-- Featured Article -->
      <div class="row mb-5" id="featuredSection" style="display:none;">
        <div class="col-12">
          <h2 class="fw-bold mb-4">Featured Article</h2>
          <div id="featuredArticle">
            <!-- Featured article will be auto-generated here -->
          </div>
        </div>
      </div>

      <!-- Recent Articles Grid -->
      <div class="row mb-5" id="articlesSection">
        <div class="col-12">
          <h2 class="fw-bold mb-4" id="articlesTitle">Recent Articles</h2>
          <div class="row g-4" id="articlesGrid">
            <!-- Articles will be auto-generated here -->
          </div>
          <div id="noPostsMessage" class="no-posts" style="display:none;">
            <i class="bi bi-journal-x display-1 text-muted mb-3"></i>
            <h3>No Blog Posts Found</h3>
            <p>Add HTML files to the <code>/blog/</code> directory to automatically populate this section.</p>
          </div>
        </div>
      </div>

      <!-- Load More Button -->
      <div class="text-center mb-5" id="loadMoreSection" style="display:none;">
        <button class="btn btn-outline-primary btn-lg" id="loadMoreBtn">Load More Articles</button>
      </div>

    </div>

    <!-- Sidebar -->
    <div class="col-lg-3">
      <div class="position-sticky" style="top: 2rem;">
        
        <!-- Newsletter Signup -->
        <div class="card mb-4">
          <div class="card-body">
            <h5 class="card-title">Stay Updated</h5>
            <p class="card-text small">Get our weekly digest of SOC 2 insights, vendor updates, and industry trends.</p>
            <form>
              <div class="mb-3">
                <input type="email" class="form-control" placeholder="your@email.com">
              </div>
              <button type="submit" class="btn btn-primary w-100">Subscribe</button>
            </form>
            <p class="small text-muted mt-2 mb-0">No spam, unsubscribe anytime.</p>
          </div>
        </div>

        <!-- Categories -->
        <div class="card mb-4" id="categoriesCard" style="display:none;">
          <div class="card-body">
            <h5 class="card-title">Categories</h5>
            <div class="d-flex flex-wrap" id="categoriesContainer">
              <!-- Auto-generated from blog posts -->
            </div>
          </div>
        </div>

        <!-- Popular Articles -->
        <div class="card mb-4" id="popularCard" style="display:none;">
          <div class="card-body">
            <h5 class="card-title">Most Popular</h5>
            <div class="list-group list-group-flush" id="popularArticles">
              <!-- Auto-generated popular articles -->
            </div>
          </div>
        </div>

        <!-- Quick Links -->
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Quick Resources</h5>
            <ul class="list-unstyled">
              <li><a href="#" class="text-decoration-none"><i class="bi bi-download me-2"></i>SOC 2 Control Matrix</a></li>
              <li><a href="#" class="text-decoration-none"><i class="bi bi-calculator me-2"></i>Compliance Cost Calculator</a></li>
              <li><a href="index.html#vendors" class="text-decoration-none"><i class="bi bi-people me-2"></i>Vendor Directory</a></li>
              <li><a href="#" class="text-decoration-none"><i class="bi bi-chat-dots me-2"></i>Community Slack</a></li>
            </ul>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>

<footer class="bg-dark text-light py-4 mt-5">
  <div class="container text-center small">
    © 2025 soc2certification.com · 
    <a href="#" class="text-light text-decoration-none">Privacy</a> · 
    <a href="#" class="text-light text-decoration-none">Contact</a>
  </div>
</footer>

<script>
/* -------- Auto Blog Detection System -------- */
let allBlogPosts = [];
let displayedPosts = 0;
const postsPerPage = 6;

async function scanForBlogFiles() {
  const blogPosts = [];
  
  // Auto-scan blog directory for HTML files
  const possibleFiles = [
    'soc2-vs-iso27001.html',
    'soc2-cost-analysis-2025.html',
    'continuous-compliance-culture.html',
    'penetration-testing-soc2.html',
    'data-classification-guide.html',
    'incident-response-planning.html',
    'compliance-platform-comparison.html',
    'soc2-readiness-checklist.html',
    'choosing-soc2-auditor.html',
    'automation-platform-guide.html',
    'employee-training-compliance.html',
    'vendor-risk-assessment.html',
    'gdpr-soc2-alignment.html',
    'incident-response-automation.html',
    'compliance-budget-planning.html',
    'soc2-type1-vs-type2.html',
    'vulnerability-management-soc2.html',
    'access-control-best-practices.html',
    'change-management-compliance.html',
    'backup-recovery-strategies.html'
  ];

  for (const file of possibleFiles) {
    try {
      const response = await fetch(`blog/${file}`, { method: 'HEAD' });
      if (response.ok) {
        // File exists, now extract metadata
        const metadata = await extractBlogMetadata(`blog/${file}`);
        if (metadata) {
          blogPosts.push(metadata);
        }
      }
    } catch (error) {
      // File doesn't exist, skip silently
      continue;
    }
  }

  return blogPosts.sort((a, b) => new Date(b.date.replace(/‑/g, '-')) - new Date(a.date.replace(/‑/g, '-')));
}

async function extractBlogMetadata(filePath) {
  try {
    const response = await fetch(filePath);
    const html = await response.text();
    
    // Extract metadata from HTML
    const parser = new DOMParser();
    const doc = parser.parseFromString(html, 'text/html');
    
    const title = doc.querySelector('title')?.textContent?.replace(' | SOC 2 Blog', '') || 'Untitled';
    const description = doc.querySelector('meta[name="description"]')?.content || '';
    const publishDate = extractDateFromHTML(doc) || extractDateFromFilename(filePath);
    const readTime = extractReadTime(doc, html);
    const author = extractAuthor(doc);
    const tags = extractTags(doc);
    const featuredImage = extractFeaturedImage(doc);
    
    return {
      title,
      excerpt: description,
      date: formatDate(publishDate),
      url: filePath,
      readTime,
      author: author.name,
      authorImg: author.img,
      img: featuredImage,
      tags,
      featured: doc.querySelector('.featured-badge') !== null
    };
  } catch (error) {
    console.log(`Could not extract metadata from ${filePath}`);
    return null;
  }
}

function extractDateFromHTML(doc) {
  // Look for date in various places
  const dateSelectors = [
    'meta[property="article:published_time"]',
    'meta[name="publish-date"]',
    'time[datetime]',
    '.publish-date',
    '.date',
    '.text-muted:contains("min read")'
  ];
  
  for (const selector of dateSelectors) {
    const element = doc.querySelector(selector);
    if (element) {
      const dateStr = element.getAttribute('datetime') || element.getAttribute('content') || element.textContent;
      // Look for date patterns in text
      const dateMatch = dateStr.match(/(\d{4})[‑-](\d{2})[‑-](\d{2})|(\w+\s+\d{1,2},\s+\d{4})/);
      if (dateMatch) {
        const date = new Date(dateStr.replace(/‑/g, '-'));
        if (!isNaN(date.getTime())) {
          return date;
        }
      }
    }
  }
  return null;
}

function extractDateFromFilename(filePath) {
  // Extract date from filename patterns like "2025-01-15-article.html"
  const filename = filePath.split('/').pop();
  const dateMatch = filename.match(/(\d{4})-(\d{2})-(\d{2})/);
  if (dateMatch) {
    return new Date(dateMatch[1], dateMatch[2] - 1, dateMatch[3]);
  }
  return new Date(); // Fallback to current date
}

function extractReadTime(doc, html) {
  // Check for explicit read time
  const readTimeEl = doc.querySelector('.reading-time, .read-time');
  if (readTimeEl) {
    const match = readTimeEl.textContent.match(/(\d+)/);
    if (match) return match[1];
  }
  
  // Calculate from word count
  const textContent = doc.body?.textContent || '';
  const wordCount = textContent.split(/\s+/).length;
  return Math.max(1, Math.ceil(wordCount / 200)).toString();
}

function extractAuthor(doc) {
  const authorName = doc.querySelector('.author-name, .by-author, h6, h5')?.textContent?.trim() || 'SOC 2 Expert';
  const authorImg = doc.querySelector('.author-avatar, .author-img')?.src || 
                   'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?auto=format&fit=crop&w=150&q=80';
  
  return { name: authorName, img: authorImg };
}

function extractTags(doc) {
  const tagElements = doc.querySelectorAll('.tag, .category, .topic');
  return Array.from(tagElements).map(el => el.textContent.trim()).filter(tag => tag.length > 0);
}

function extractFeaturedImage(doc) {
  // Look for featured image in various places
  const imgSelectors = [
    'meta[property="og:image"]',
    '.featured-image img',
    '.hero-image img',
    'article img:first-of-type',
    'img.card-img-top',
    'header img'
  ];
  
  for (const selector of imgSelectors) {
    const element = doc.querySelector(selector);
    if (element) {
      return element.getAttribute('content') || element.src;
    }
  }
  
  // Fallback to a generic image
  return 'https://images.unsplash.com/photo-1581091012184-7f5bb97e20e6?auto=format&fit=crop&w=800&q=60';
}

function formatDate(date) {
  return date.toLocaleDateString('en-CA').replace(/-/g, '‑');
}

// Auto-generate featured article
function renderFeaturedArticle(posts) {
  const featuredPost = posts.find(post => post.featured) || posts[0];
  if (!featuredPost) return;
  
  const featuredContainer = document.getElementById('featuredArticle');
  const featuredSection = document.getElementById('featuredSection');
  
  const tagsHtml = featuredPost.tags.map(tag => `<a href="#" class="tag">${tag}</a>`).join('');
  
  const featuredHtml = `
    <div class="card blog-card border-0 shadow-sm position-relative">
      <div class="featured-badge">
        <i class="bi bi-star-fill me-1"></i>Featured
      </div>
      <div class="row g-0">
        <div class="col-md-6">
          <img src="${featuredPost.img}" 
               class="img-fluid h-100 w-100" style="object-fit:cover;min-height:300px;" alt="">
        </div>
        <div class="col-md-6">
          <div class="card-body h-100 d-flex flex-column p-4">
            <div class="mb-3">
              ${tagsHtml}
            </div>
            <h3 class="card-title fw-bold mb-3">${featuredPost.title}</h3>
            <p class="card-text text-muted mb-3">${featuredPost.excerpt}</p>
            <div class="mt-auto">
              <div class="author-info mb-3">
                <img src="${featuredPost.authorImg}" 
                     class="author-avatar" alt="${featuredPost.author}">
                <div>
                  <div class="fw-semibold">${featuredPost.author}</div>
                  <small class="text-muted">${featuredPost.date} • ${featuredPost.readTime} min read</small>
                </div>
              </div>
              <a href="${featuredPost.url}" class="btn btn-primary">Read Article</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  `;
  
  featuredContainer.innerHTML = featuredHtml;
  featuredSection.style.display = 'block';
}

// Auto-generate recent articles
function renderRecentArticles(posts, startIndex = 0) {
  const grid = document.getElementById('articlesGrid');
  const recentPosts = posts.filter(post => !post.featured).slice(startIndex, startIndex + postsPerPage);
  
  recentPosts.forEach(post => {
    const tagsHtml = post.tags.map(tag => `<a href="#" class="tag">${tag}</a>`).join('');
    
    const articleCard = `
      <div class="col-md-6">
        <div class="card blog-card h-100 border-0 shadow-sm">
          <img src="${post.img}" class="card-img-top" alt="">
          <div class="card-body d-flex flex-column">
            <div class="mb-3">
              ${tagsHtml}
            </div>
            <h5 class="card-title fw-bold">${post.title}</h5>
            <p class="card-text text-muted flex-grow-1">${post.excerpt}</p>
            <div class="author-info mb-3">
              <img src="${post.authorImg}" class="author-avatar" alt="${post.author}">
              <div>
                <div class="fw-semibold">${post.author}</div>
                <small class="text-muted">${post.date} • ${post.readTime} min read</small>
              </div>
            </div>
            <a href="${post.url}" class="btn btn-outline-primary mt-auto">Read More</a>
          </div>
        </div>
      </div>
    `;
    
    grid.insertAdjacentHTML('beforeend', articleCard);
  });
  
  displayedPosts += recentPosts.length;
  const totalNonFeatured = posts.filter(post => !post.featured).length;
  
  if (displayedPosts < totalNonFeatured) {
    document.getElementById('loadMoreSection').style.display = 'block';
  } else {
    document.getElementById('loadMoreSection').style.display = 'none';
  }
}

// Auto-generate popular articles in sidebar
function renderPopularArticles(posts) {
  if (posts.length === 0) return;
  
  const popularContainer = document.getElementById('popularArticles');
  const popularCard = document.getElementById('popularCard');
  
  // Show top 3 articles
  const popularPosts = posts.slice(0, 3);
  const viewCounts = ['2,340', '1,890', '1,650'];
  
  popularPosts.forEach((post, index) => {
    const popularItem = `
      <a href="${post.url}" class="list-group-item list-group-item-action border-0 px-0">
        <div class="small text-muted mb-1">${viewCounts[index]} views</div>
        <div class="fw-semibold">${post.title}</div>
      </a>
    `;
    popularContainer.insertAdjacentHTML('beforeend', popularItem);
  });
  
  popularCard.style.display = 'block';
}

// Auto-generate all unique tags for categories
function renderCategories(posts) {
  if (posts.length === 0) return;
  
  const allTags = [...new Set(posts.flatMap(post => post.tags))];
  const categoriesContainer = document.getElementById('categoriesContainer');
  const categoriesCard = document.getElementById('categoriesCard');
  
  allTags.forEach(tag => {
    const tagElement = `<a href="#" class="tag mb-2">${tag}</a>`;
    categoriesContainer.insertAdjacentHTML('beforeend', tagElement);
  });
  
  categoriesCard.style.display = 'block';
}

// Initialize blog content
async function initializeBlog() {
  try {
    allBlogPosts = await scanForBlogFiles();
    
    if (allBlogPosts.length === 0) {
      document.getElementById('noPostsMessage').style.display = 'block';
      document.getElementById('articlesTitle').textContent = 'Blog Posts';
      return;
    }
    
    renderFeaturedArticle(allBlogPosts);
    renderRecentArticles(allBlogPosts);
    renderPopularArticles(allBlogPosts);
    renderCategories(allBlogPosts);
    
  } catch (error) {
    console.log('Blog initialization failed:', error);
    document.getElementById('noPostsMessage').style.display = 'block';
  }
}

// Search functionality
function setupSearch() {
  const searchInput = document.getElementById('searchInput');
  if (searchInput) {
    searchInput.addEventListener('input', function(e) {
      const searchTerm = e.target.value.toLowerCase();
      const articles = document.querySelectorAll('#articlesGrid .col-md-6');
      
      articles.forEach(article => {
        const title = article.querySelector('.card-title').textContent.toLowerCase();
        const content = article.querySelector('.card-text').textContent.toLowerCase();
        const tags = Array.from(article.querySelectorAll('.tag')).map(tag => tag.textContent.toLowerCase()).join(' ');
        
        if (title.includes(searchTerm) || content.includes(searchTerm) || tags.includes(searchTerm)) {
          article.style.display = 'block';
        } else {
          article.style.display = 'none';
        }
      });
    });
  }
}

// Load more functionality
function setupLoadMore() {
  const loadMoreBtn = document.getElementById('loadMoreBtn');
  if (loadMoreBtn) {
    loadMoreBtn.addEventListener('click', function() {
      const nonFeaturedPosts = allBlogPosts.filter(post => !post.featured);
      renderRecentArticles(allBlogPosts, displayedPosts);
    });
  }
}

// Initialize everything when DOM is ready
document.addEventListener('DOMContentLoaded', function() {
  initializeBlog();
  setupSearch();
  setupLoadMore();
});
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
